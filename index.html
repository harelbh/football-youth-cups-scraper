<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×’×‘×™×¢×™ × ×•×¢×¨ - ××¢×§×‘ ×—×™</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            direction: rtl;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .last-update {
            color: rgba(255,255,255,0.9);
            font-size: 0.9em;
        }

        /* ××©×—×§×™× ×—×™×™× */
        .live-section {
            background: linear-gradient(135deg, #ff416c 0%, #ff4b2b 100%);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(255, 65, 108, 0.4);
            animation: pulse-glow 2s ease-in-out infinite;
        }

        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 10px 40px rgba(255, 65, 108, 0.4); }
            50% { box-shadow: 0 10px 60px rgba(255, 65, 108, 0.6); }
        }

        .live-section h2 {
            color: white;
            font-size: 2em;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .live-badge {
            background: white;
            color: #ff416c;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.6em;
            font-weight: bold;
            animation: blink 1s ease-in-out infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        .no-live {
            color: white;
            text-align: center;
            padding: 40px;
            font-size: 1.2em;
            opacity: 0.9;
        }

        /* ×›×œ ×”××©×—×§×™× */
        .matches-section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }

        .matches-section h2 {
            color: #667eea;
            font-size: 1.8em;
            margin-bottom: 20px;
        }

        .filters {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 10px 20px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }

        .filter-btn:hover, .filter-btn.active {
            background: #667eea;
            color: white;
        }

        .match-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            transition: transform 0.3s, box-shadow 0.3s;
            border-right: 5px solid #667eea;
        }

        .match-card:hover {
            transform: translateX(-5px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .match-card.live {
            background: linear-gradient(to left, #fff5f5 0%, #ffe5e5 100%);
            border-right-color: #ff416c;
        }

        .match-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .cup-name {
            font-weight: bold;
            color: #667eea;
            font-size: 0.9em;
        }

        .match-card.live .cup-name {
            color: #ff416c;
        }

        .match-status {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.9em;
        }

        .status-badge {
            padding: 5px 12px;
            border-radius: 15px;
            font-weight: bold;
            font-size: 0.85em;
        }

        .status-live {
            background: #ff416c;
            color: white;
            animation: pulse 1.5s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .status-finished {
            background: #28a745;
            color: white;
        }

        .status-upcoming {
            background: #ffc107;
            color: #333;
        }

        .match-teams {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 20px;
            margin-bottom: 10px;
        }

        .team {
            flex: 1;
            font-size: 1.1em;
            font-weight: bold;
        }

        .score {
            font-size: 2em;
            font-weight: bold;
            color: #333;
            min-width: 80px;
            text-align: center;
        }

        .match-card.live .score {
            color: #ff416c;
        }

        .match-info {
            display: flex;
            gap: 15px;
            font-size: 0.9em;
            color: #666;
            flex-wrap: wrap;
        }

        .info-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .minute-display {
            font-size: 1.5em;
            font-weight: bold;
            color: #ff416c;
            padding: 5px 15px;
            background: white;
            border-radius: 10px;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #667eea;
            font-size: 1.2em;
        }

        .error {
            text-align: center;
            padding: 40px;
            color: #dc3545;
            background: #f8d7da;
            border-radius: 10px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 1.8em;
            }

            .match-teams {
                flex-direction: column;
                text-align: center;
            }

            .score {
                margin: 10px 0;
            }

            .filters {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>âš½ ×’×‘×™×¢×™ × ×•×¢×¨ - ××¢×§×‘ ×—×™</h1>
            <div class="last-update" id="lastUpdate">×˜×•×¢×Ÿ × ×ª×•× ×™×...</div>
        </header>

        <!-- ××©×—×§×™× ×—×™×™× -->
        <div class="live-section" id="liveSection">
            <h2>
                ğŸ”´ ××©×—×§×™× ×—×™×™×
                <span class="live-badge">LIVE</span>
            </h2>
            <div id="liveMatches" class="loading">×˜×•×¢×Ÿ ××©×—×§×™× ×—×™×™×...</div>
        </div>

        <!-- ×›×œ ×”××©×—×§×™× -->
        <div class="matches-section">
            <h2>ğŸ“Š ×›×œ ×”××©×—×§×™×</h2>
            
            <div class="filters">
                <button class="filter-btn active" data-filter="all">×”×›×œ</button>
                <button class="filter-btn" data-filter="live">×—×™×™×</button>
                <button class="filter-btn" data-filter="upcoming">×¢×ª×™×“×™×™×</button>
                <button class="filter-btn" data-filter="finished">× ×’××¨×•</button>
            </div>

            <div id="allMatches" class="loading">×˜×•×¢×Ÿ ××ª ×›×œ ×”××©×—×§×™×...</div>
        </div>
    </div>

    <script>
        const API_URL = 'https://clock-production-8817.up.railway.app';
        let currentFilter = 'all';
        let allMatchesData = [];

        // ×˜×¢×Ÿ ××©×—×§×™× ×—×™×™×
        async function loadLiveMatches() {
            try {
                const response = await fetch(`${API_URL}/api/live`);
                const liveMatches = await response.json();
                
                const container = document.getElementById('liveMatches');
                
                if (liveMatches.length === 0) {
                    container.innerHTML = '<div class="no-live">××™×Ÿ ××©×—×§×™× ×—×™×™× ×›×¨×’×¢ ğŸ˜´</div>';
                } else {
                    container.innerHTML = liveMatches.map(match => createMatchCard(match, true)).join('');
                }
            } catch (error) {
                console.error('Error loading live matches:', error);
                document.getElementById('liveMatches').innerHTML = 
                    '<div class="error">×©×’×™××” ×‘×˜×¢×™× ×ª ××©×—×§×™× ×—×™×™×</div>';
            }
        }

        // ×˜×¢×Ÿ ××ª ×›×œ ×”××©×—×§×™×
        async function loadAllMatches() {
            try {
                const response = await fetch(`${API_URL}/api/matches`);
                allMatchesData = await response.json();
                
                displayMatches();
                updateLastUpdate();
            } catch (error) {
                console.error('Error loading all matches:', error);
                document.getElementById('allMatches').innerHTML = 
                    '<div class="error">×©×’×™××” ×‘×˜×¢×™× ×ª ×”××©×—×§×™×</div>';
            }
        }

        // ×”×¦×’ ××©×—×§×™× ×œ×¤×™ ×¤×™×œ×˜×¨
        function displayMatches() {
            const container = document.getElementById('allMatches');
            
            let filteredMatches = allMatchesData;
            
            if (currentFilter !== 'all') {
                filteredMatches = allMatchesData.filter(match => match.status === currentFilter);
            }

            if (filteredMatches.length === 0) {
                container.innerHTML = '<div class="no-live">××™×Ÿ ××©×—×§×™× ××¡×•×’ ×–×”</div>';
            } else {
                container.innerHTML = filteredMatches.map(match => createMatchCard(match, false)).join('');
            }
        }

        // ×¦×•×¨ ×›×¨×˜×™×¡ ××©×—×§
        function createMatchCard(match, isLiveSection) {
            const isLive = match.status === 'live';
            const isFinished = match.status === 'finished';
            const isUpcoming = match.status === 'upcoming';

            let statusBadge = '';
            if (isLive) {
                statusBadge = `<span class="status-badge status-live">LIVE ${match.liveMinute || ''}</span>`;
            } else if (isFinished) {
                statusBadge = '<span class="status-badge status-finished">× ×’××¨</span>';
            } else if (isUpcoming) {
                statusBadge = '<span class="status-badge status-upcoming">×¢×ª×™×“×™</span>';
            }

            const score = (match.score && match.score.home !== null && match.score.away !== null)
                ? `${match.score.home} - ${match.score.away}`
                : '×˜×¨× ×”×ª×—×™×œ';

            return `
                <div class="match-card ${isLive ? 'live' : ''}">
                    <div class="match-header">
                        <div class="cup-name">${match.cupName || '×’×‘×™×¢'}</div>
                        <div class="match-status">
                            ${statusBadge}
                            ${isLive && match.liveMinute ? `<div class="minute-display">${match.liveMinute}'</div>` : ''}
                        </div>
                    </div>
                    
                    <div class="match-teams">
                        <div class="team">${match.homeTeam}</div>
                        <div class="score">${score}</div>
                        <div class="team">${match.awayTeam}</div>
                    </div>
                    
                    <div class="match-info">
                        ${match.round ? `<div class="info-item">ğŸ† ${match.round}</div>` : ''}
                        ${match.field ? `<div class="info-item">ğŸ“ ${match.field}</div>` : ''}
                        ${match.date ? `<div class="info-item">ğŸ“… ${match.date}</div>` : ''}
                        ${match.time ? `<div class="info-item">ğŸ• ${match.time}</div>` : ''}
                    </div>
                </div>
            `;
        }

        // ×¢×“×›×Ÿ ×–××Ÿ ×¢×“×›×•×Ÿ ××—×¨×•×Ÿ
        function updateLastUpdate() {
            const now = new Date();
            const timeStr = now.toLocaleTimeString('he-IL');
            document.getElementById('lastUpdate').textContent = `×¢×•×“×›×Ÿ ×œ××—×¨×•× ×”: ${timeStr}`;
        }

        // ×¤×™×œ×˜×¨×™×
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentFilter = btn.dataset.filter;
                displayMatches();
            });
        });

        // ×˜×¢×Ÿ × ×ª×•× ×™× ×‘×˜×¢×™× ×” ×¨××©×•× ×™×ª
        loadLiveMatches();
        loadAllMatches();

        // ×¨×¢× ×•×Ÿ ××•×˜×•××˜×™ - ××©×—×§×™× ×—×™×™× ×›×œ 30 ×©× ×™×•×ª
        setInterval(loadLiveMatches, 30000);

        // ×¨×¢× ×•×Ÿ ××•×˜×•××˜×™ - ×›×œ ×”××©×—×§×™× ×›×œ ×“×§×”
        setInterval(loadAllMatches, 60000);
    </script>
</body>
</html>
