services:
  - type: web
    name: football-scraper
    env: python
    buildCommand: |
      pip install -r requirements_render.txt
      # התקנת Chrome ו-ChromeDriver
      wget -q -O - https://dl-ssl.google.com/linux/linux_signing_key.pub | apt-key add -
      echo "deb http://dl.google.com/linux/chrome/deb/ stable main" >> /etc/apt/sources.list.d/google.list
      apt-get update
      apt-get install -y google-chrome-stable
    startCommand: "echo 'Cron job only - no web service needed'"
    
  # Cron Job - רץ כל 5 דקות
  - type: cron
    name: football-scraper-cron
    env: python
    schedule: "*/5 * * * *"
    buildCommand: |
      pip install -r requirements_render.txt
      apt-get update
      apt-get install -y wget gnupg
      wget -q -O - https://dl-ssl.google.com/linux/linux_signing_key.pub | apt-key add -
      echo "deb http://dl.google.com/linux/chrome/deb/ stable main" >> /etc/apt/sources.list.d/google.list
      apt-get update
      apt-get install -y google-chrome-stable
    command: "python render_scraper.py"
    envVars:
      - key: API_URL
        value: https://yty.s904.upress.link/api/update.php
      - key: API_KEY
        generateValue: true  # Render יצור מפתח אקראי
